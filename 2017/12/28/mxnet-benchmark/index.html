<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>Benchmarks of MXNet and Gluon | Ocean of Yogurt | It would be perfect if it works (≡•̀·̯•́≡)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="deep learning,benchmark,mxnet">
    <meta name="description" content="Benchmarks of MXNet and GluonThis is a performance comparison of native MXNet and Gluon IntroductionMXNet is a deep learning framework supported by Amazon. I have had experience with MXNet in the year">
<meta name="keywords" content="deep learning,benchmark,mxnet">
<meta property="og:type" content="article">
<meta property="og:title" content="Benchmarks of MXNet and Gluon">
<meta property="og:url" content="https://lightingghost.github.io/2017/12/28/mxnet-benchmark/index.html">
<meta property="og:site_name" content="Ocean of Yogurt">
<meta property="og:description" content="Benchmarks of MXNet and GluonThis is a performance comparison of native MXNet and Gluon IntroductionMXNet is a deep learning framework supported by Amazon. I have had experience with MXNet in the year">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2017-12-29T01:14:36.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Benchmarks of MXNet and Gluon">
<meta name="twitter:description" content="Benchmarks of MXNet and GluonThis is a performance comparison of native MXNet and Gluon IntroductionMXNet is a deep learning framework supported by Amazon. I have had experience with MXNet in the year">
    
        <link rel="alternate" type="application/atom+xml" title="Ocean of Yogurt" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">lightingghost</h5>
          <a href="mailto:<html>&#122;&#104;&#101;&#110;&#112;&#51;&#110;&#103;&#122;&#104;&#111;&#117;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</html>" title="<html>&#122;&#104;&#101;&#110;&#112;&#51;&#110;&#103;&#122;&#104;&#111;&#117;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</html>" class="mail"><html>&#122;&#104;&#101;&#110;&#112;&#51;&#110;&#103;&#122;&#104;&#111;&#117;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</html></a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/lightingghost" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Benchmarks of MXNet and Gluon</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Benchmarks of MXNet and Gluon</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-12-28T20:37:38.000Z" itemprop="datePublished" class="page-time">
  2017-12-28
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Memo/">Memo</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Benchmarks-of-MXNet-and-Gluon"><span class="post-toc-number">1.</span> <span class="post-toc-text">Benchmarks of MXNet and Gluon</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Introduction"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">Introduction</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Gluon"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">Gluon</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Comparison"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">Comparison</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#AlexNet"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">AlexNet</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#GoogLeNet"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">GoogLeNet</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Conclusion"><span class="post-toc-number">2.</span> <span class="post-toc-text">Conclusion</span></a></li></ol>
        </nav>
    </aside>


<article id="post-mxnet-benchmark"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Benchmarks of MXNet and Gluon</h1>
        <div class="post-meta">
            <time class="post-time" title="2017-12-28 12:37:38" datetime="2017-12-28T20:37:38.000Z"  itemprop="datePublished">2017-12-28</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Memo/">Memo</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="Benchmarks-of-MXNet-and-Gluon"><a href="#Benchmarks-of-MXNet-and-Gluon" class="headerlink" title="Benchmarks of MXNet and Gluon"></a>Benchmarks of MXNet and Gluon</h1><p>This is a performance comparison of native MXNet and Gluon</p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p><a href="https://mxnet.incubator.apache.org" target="_blank" rel="noopener">MXNet</a> is a deep learning framework supported by Amazon. I have had experience with MXNet in the year of 2014. At that time, the documentation of MXNet was far from satisfactory, and the amount of operators supported was not small. However, the performance of MXNet in terms of training speed and memory usage outperformed almost all others at that time. (I am talking about you, tensorflow 0.1 :-P)</p>
<p>Recently, MXNet introduced <a href="http://gluon.mxnet.io/index.html" target="_blank" rel="noopener">Gluon</a>, which offers high-level abstractions for predefined layers, loss functions, and optimizers. </p>
<p>I am trying to adapt MXNet / Gluon for my next project. But I want to persue the best speed and memory efficiency, therefore I am looking for the answer that whether I should stick with native mxnet or try the new gluon</p>
<h2 id="Gluon"><a href="#Gluon" class="headerlink" title="Gluon"></a>Gluon</h2><p> There a three base block classes in Gluon, <code>Block</code>, <code>HybridBlock</code>, and <code>SymbolBlock</code>. <code>SymbolBlock</code> seems to provide a wrap outside the original mxnet <code>symbol</code> API. <code>Block</code> is the new imperative programming API, while <code>HybridBlock</code> provide more flexibility: it is similar to the <code>Block</code>, but can be <code>hybridize()</code> to make a symbolic computational graph, which provides a better performance.</p>
<h2 id="Comparison"><a href="#Comparison" class="headerlink" title="Comparison"></a>Comparison</h2><p>A natural questions is, what is the overheading of the wrap outside MXNet? I am going to compare the performance of native mxnet, gluon SymbolBlock, hybridized HybrideBlock, and Block on diffferent network architectures.</p>
<p>The code was <a href="https://github.com/lightingghost/mxnet_benchmark" target="_blank" rel="noopener">here</a>. forward and backward were repeated 100 times for average.</p>
<p>The hardware and software platforms are:</p>
<p>macOS 10.13, CUDA 9.0 CuDNN 7.0</p>
<p>Titan Xp, i7-4790K, 32G</p>
<h3 id="AlexNet"><a href="#AlexNet" class="headerlink" title="AlexNet"></a>AlexNet</h3><table>
<thead>
<tr>
<th>Framework</th>
<th style="text-align:center">Time (ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td>native mxnet</td>
<td style="text-align:center">41.2</td>
</tr>
<tr>
<td>gluon SymbolBlock</td>
<td style="text-align:center">40.8</td>
</tr>
<tr>
<td>gluon HybridBlock</td>
<td style="text-align:center">36.8</td>
</tr>
<tr>
<td>gluon HybridBlock (hybridized)</td>
<td style="text-align:center">36.8</td>
</tr>
<tr>
<td>gluon Block</td>
<td style="text-align:center">36.9</td>
</tr>
</tbody>
</table>
<p>It seems the network structure is too simple (sometime naive) to show the difference. I am going to test more complex structures.</p>
<h3 id="GoogLeNet"><a href="#GoogLeNet" class="headerlink" title="GoogLeNet"></a>GoogLeNet</h3><table>
<thead>
<tr>
<th>Framework</th>
<th style="text-align:center">Time (ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td>native mxnet</td>
<td style="text-align:center">236.6</td>
</tr>
<tr>
<td>gluon SymbolBlock</td>
<td style="text-align:center">255.1</td>
</tr>
<tr>
<td>gluon HybridBlock</td>
<td style="text-align:center">270.4</td>
</tr>
<tr>
<td>gluon HybridBlock (hybridized)</td>
<td style="text-align:center">222.7</td>
</tr>
<tr>
<td>gluon Block</td>
<td style="text-align:center">272.4</td>
</tr>
</tbody>
</table>
<p>Interestingly, the hybridized HybridBlock gives the best performance in both cases.</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>The performance lost due to the wrapping of gluon is minimal.</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-12-29T01:14:36.000Z" itemprop="dateUpdated">2017-12-28 17:14:36</time>
</span><br>


        
    </div>
    
    <footer>
        <a href="https://lightingghost.github.io">
            <img src="/img/avatar.jpg" alt="lightingghost">
            lightingghost
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/benchmark/">benchmark</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/deep-learning/">deep learning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mxnet/">mxnet</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://lightingghost.github.io/2017/12/28/mxnet-benchmark/&title=《Benchmarks of MXNet and Gluon》 — Ocean of Yogurt&pic=https://lightingghost.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://lightingghost.github.io/2017/12/28/mxnet-benchmark/&title=《Benchmarks of MXNet and Gluon》 — Ocean of Yogurt&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://lightingghost.github.io/2017/12/28/mxnet-benchmark/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Benchmarks of MXNet and Gluon》 — Ocean of Yogurt&url=https://lightingghost.github.io/2017/12/28/mxnet-benchmark/&via=https://lightingghost.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://lightingghost.github.io/2017/12/28/mxnet-benchmark/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/04/29/debug-python-c-module/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Debug cpp Modules Imported by Python</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2017/12/26/math-hexo/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">The Problem of Subscript in Hexo with Mathjax</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'false' == 'true',
            verify: 'false' == 'true',
            appId: "U4Xs63qBdD4B0fbPDtNW2GIo-gzGzoHsz",
            appKey: "Jhhjx1eEhlevAXkgLEuTkzyg",
            avatar: "mm",
            placeholder: "Just go go",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
            lang: "en"
        })
    </script>
    <!-- Valine Comments end -->







</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        Site UV：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        Site PV：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>lightingghost &copy; 2017 - 2018</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://lightingghost.github.io/2017/12/28/mxnet-benchmark/&title=《Benchmarks of MXNet and Gluon》 — Ocean of Yogurt&pic=https://lightingghost.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://lightingghost.github.io/2017/12/28/mxnet-benchmark/&title=《Benchmarks of MXNet and Gluon》 — Ocean of Yogurt&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://lightingghost.github.io/2017/12/28/mxnet-benchmark/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Benchmarks of MXNet and Gluon》 — Ocean of Yogurt&url=https://lightingghost.github.io/2017/12/28/mxnet-benchmark/&via=https://lightingghost.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://lightingghost.github.io/2017/12/28/mxnet-benchmark/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=https://lightingghost.github.io/2017/12/28/mxnet-benchmark/" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" async></script>




<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '死鬼去哪里了！';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)咦!又好了!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
